<!DOCTYPE html>
<html lang="en">
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script>
var btn = document.createElement("br");        // Create a <button> element
var httpRequest = null;
var gates = "open";
var count = 0;
var clicko = function() {
    if (gates === "open") {
        gates = "closed";
        count++;
        document.getElementById("counter").innerHTML = "Cats Seen: " + count;
        httpRequest = new XMLHttpRequest(); 
        var url = "http://thecatapi.com/api/images/get?format=src&type=gif";
        httpRequest.open ("GET", url, true); 
        httpRequest.send (null);
        var para = document.createElement("p");
        var date = new Date();
        var t = document.createTextNode(date);    
        para.appendChild(t);
        var img = document.createElement("img");
        img.setAttribute("width", "500px");
        img.setAttribute("height", "400px");
            var timeout = function() {
        setTimeout(function(){ 
            if (httpRequest.responseURL !== "") {
            img.src = httpRequest.responseURL;
            $("#imgs").prepend(btn);   
            $("#imgs").prepend(para);   
        
            $("#imgs").prepend(img); 
            $("#imgs").prepend(btn);   
            gates = "open";
            } else {
                timeout();
            }
        }, 500);
    }
        timeout();

    }
}

</script>
</head>
<body>
<center>
<h1 id="title">CATchpoint</h1> 
<h2 id="counter">Cats Seen: 0</h2>
<button onclick="clicko()" id="button">Click Here</button>

<div id="imgs">
</center>
</div>

</body>

</html>

